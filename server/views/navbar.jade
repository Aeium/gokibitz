nav.navbar.navbar-inverse.navbar-fixed-top(
	role='navigation'
	ng-controller='NavbarController'
)
	.container-fluid

		.navbar-header
			button.navbar-toggle(
				ng-click='isCollapsed = !isCollapsed'
			)
				.sr-only Toggle navigation
				.icon-bar
				.icon-bar
				.icon-bar
			a.navbar-brand(href='/' name='top') go<b>kibitz</b>
				span.release alpha

		.collapse.navbar-collapse(
			collapse='isCollapsed'
		)
			ul.nav.navbar-nav.ng-cloak
				li(
					ng-repeat='item in menu'
					ui-route='/{{ item.link }}'
					ng-class='{ active: $uiRoute }'
				)
					a(href='/{{ item.link }}') {{ item.title }}

				li(
					ng-repeat='item in authMenu'
					ng-show='currentUser'
					ui-route='/{{ item.link }}'
					ng-class='{ active: $uiRoute }'
				)
					a(href='/{{ item.link }}') {{ item.title }}

				li.notifications.dropdown(
					dropdown
					on-toggle='notificationToggle(open)'
					ng-show='currentUser'
				)
					a.dropdown-toggle(
						dropdown-toggle
					)
						span.fui-chat
						= ' '
						span.badge.fade-in-fade-out(
							ng-show='unseenCount'
						) {{ unseenCount }}
					ul.dropdown-menu(role='menu')
						li
							notifications(
								unread-count='unreadCount'
								unseen-count='unseenCount'
								count='count'
								unread='false'
								username='{{ currentUser.username }}'
								most-recent='mostRecentNotification'
								last-seen='$storage.lastSeenNotification'
							)
						//
							li.divider
							li
								a(
									ng-href='/notifications'
								) See all

			ul.nav.navbar-nav.navbar-right(ng-hide='currentUser')
				li
					//-a(href='/login') Log In
					a(ng-click='loginModal()') Log In
				li
					//-a(href='/signup') Sign Up
					a(ng-click='signupModal()') Sign Up

			ul.nav.navbar-nav.navbar-right.ng-cloak(
				dropdown
				ng-show='currentUser'
			)
				li.dropdown
					a.dropdown-toggle(dropdown-toggle) Welcome, {{ currentUser.username }}
						=' '
						b.caret

				ul.dropdown-menu(role='menu')
					li
						a(href='/user/{{ currentUser.username }}') Profile
					li
						a(ng-click='logout()') Log Out
